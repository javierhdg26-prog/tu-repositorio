
===== Archivo: tests/useMachines.test.js =====

import { describe, it, expect, vi } from "vitest";

vi.mock("firebase/firestore", () => ({
  collection: vi.fn(),
  addDoc: vi.fn(),
  doc: vi.fn(),
  updateDoc: vi.fn(),
  deleteDoc: vi.fn(),
  onSnapshot: vi.fn((q, onNext) => {
    onNext({ docs: [] });
    return () => {};
  }),
  query: vi.fn(),
  orderBy: vi.fn(),
}));

describe("useMachines hook", () => {
  it("exposes CRUD functions", async () => {
    const mod = await import("../src/hooks/useMachines");
    const useMachines = mod.default;
    const hook = useMachines();
    expect(hook).toHaveProperty("createMachine");
    expect(hook).toHaveProperty("updateMachine");
    expect(hook).toHaveProperty("deleteMachine");
  });
});
